# 開発環境での認証ガイド

## メール認証を有効にしたまま開発する方法

### 方法1: Gmailを使用したテストアカウント（推奨）

Gmailのエイリアス機能を使って複数のテストアカウントを作成できます。

```
基本メール: yourname@gmail.com

テスト用エイリアス:
- yourname+test1@gmail.com
- yourname+test2@gmail.com
- yourname+admin@gmail.com
```

すべて同じGmailアカウントにメールが届きます。

### 方法2: 開発用の実メールアドレスを使用

1. 自分のメールアドレスで新規登録
2. 確認メールが届いたらリンクをクリック
3. 以降はパスワードでログイン可能

### 方法3: カスタムSMTPサーバーの設定（上級者向け）

無料のSMTPサービスを使用：
- [Resend](https://resend.com/) - 月100通まで無料
- [SendGrid](https://sendgrid.com/) - 月100通まで無料

設定方法：
1. Supabaseダッシュボード → Settings → Auth
2. SMTP Settingsで設定

### 開発時のベストプラクティス

1. **テスト用アカウントを事前に作成**
   - `test@example.com` / `password123`
   - メール確認済みの状態にしておく

2. **ログイン情報を保存**
   - ブラウザのパスワードマネージャーを活用
   - 開発用の認証情報をREADMEに記載（プライベートリポジトリの場合）

3. **リフレッシュトークンエラーの対処**
   - ブラウザのキャッシュをクリア
   - シークレットウィンドウで確認
   - `supabase.auth.signOut()`を実行してリセット

## トラブルシューティング

### "Invalid Refresh Token"エラーが出る場合

1. ブラウザの開発者ツールでConsoleを開く
2. 以下を実行：
```javascript
await supabase.auth.signOut()
```
3. ページをリロード
4. 再度ログイン

### メールが届かない場合

1. 迷惑メールフォルダを確認
2. Supabaseの無料プランは1時間に4通まで
3. 制限に達した場合は1時間待つ

## 本番環境への移行

1. カスタムSMTPサーバーを設定
2. メール確認を有効のまま維持
3. 適切なエラーハンドリングを実装